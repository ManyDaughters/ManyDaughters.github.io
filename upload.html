<!DOCTYPE html>
<html>
<body>
<h1>#ManyDaughters</h1>
<p>Please select and upload your analysis code here. Choose the do-files corresponding to your tests of hypotheses 1 to 4 accordingly.</p>

<!-- File upload form -->
<form id="upload-form" action="http://localhost:5000/upload" method="post" enctype="multipart/form-data">
  <label for="file1">Hypothesis 1 do-file:</label>
  <input type="file" id="file1" name="file1"><br><br>
  <label for="file2">Hypothesis 2 do-file:</label>
  <input type="file" id="file2" name="file2"><br><br>
  <label for="file3">Hypothesis 3 do-file:</label>
  <input type="file" id="file3" name="file3"><br><br>
  <label for="file4">Hypothesis 4 do-file:</label>
  <input type="file" id="file4" name="file4"><br><br>
  <input type="hidden" id="team-id" name="team-id"><br>
  <input type="submit" value="Upload">
</form>

<script>
  if (document.referrer.indexOf('index.html') === -1) {
    window.location.href = 'index.html';
  }

  // Retrieve the team ID from the URL parameters and set it in the hidden input field
  const urlParams = new URLSearchParams(window.location.search);
  const teamId = urlParams.get('team-id');
  console.log('Team ID from URL:', teamId); // Log the team ID for debugging
  document.getElementById('team-id').value = teamId;
  console.log('Hidden input value:', document.getElementById('team-id').value); // Log the hidden input value for debugging

  // Handle form submission
  document.getElementById('upload-form').addEventListener('submit', function(event) {
    event.preventDefault();
    const formData = new FormData(this);
    fetch(this.action, {
      method: this.method,
      body: formData
    }).then(response => response.json())
      .then(data => console.log(data))
      .catch(error => console.error('Error:', error));
  });
</script>
</body>
</html>